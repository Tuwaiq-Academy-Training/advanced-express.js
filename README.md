
محتوى الملف:
- ماهو jeson
- الخصائصRequest
- دوال Response
- رموز حالات HTTP


## ماهو jeson

ال JSON أو JavaScript Object Symation هي صيغة بسيطة وقابلة للقراءة بسهولة من قبل الإنسان وتستخدم لتمثيل البيانات و تبادلها بين الأنظمة البرمجية المختلفة.

جيسون JSON ليست لغة برمجية إنما هي طريقة متفق عليها بين لغات البرمجة المختلفة لتمثيل البيانات بهدف سهولة تبادل البيانات بين هذه اللغات.

صيغة جيسون تمثل عن طريق نص، والبنية لهذا النص تشبه الكائن أو Object في لغة البرمجة جافاسكربت, وهذه الصيغة مدعومة من لغات البرمجة الأساسية الأخرى وتستخدم هذه الصيغة بشكل كبير لتبادل البيانات بين الخادم والعميل Client-Server.

####  كيفية تمثيل البيانات 

الجزءان الأساسيان اللذان يشكلان JSON هما المفاتيح Keys والقيم Values.

- المفتاح Key : يمثل اسم فريد لقيمة البيانات ويتم وضعه عادة بين علامات التنصيص

- القيمة Value : تمثل البيانات ويمكن أن تمثل اكثر من نوع بيانات مثل النصوص والأرقام والمصفوفات.

معًا يشكل Key / Value سطر في صيغة جيسون حيث يتم استخدام علامة , كفاصل بين السطور.

#### أنواع البيانات للقيم في JSON

- ال Array المصفوفة: مجموعة من القيم المترابطة على سبيل المثال: رواتب الموظفين ويتم تمثيلها كالتالي [2000, 5000,6000].

- ال Boolean قيمة منطقية: ولها احتمالان True او False.

- ال Number رقم: تكون القيمة عبارة عدد صحيحا أو حقيقيا أو فواصل عشرية.

- ال Object لكائن: مجموعة مترابطة من أزواج من المفاتيح / القيم Key / Value.

- ال String السلسلة النصية: مجموعة من الأحرف النصية العادية تشكل عادة كلمة.



## Request

### مقدمة في مفهوم req.params
-َ params هي اختصار لكلمة parameters وهي property خاصة بrequsts والتي من خلالها يمكننا الحصول على القيم المرسلة في الرابط ، لنوضح ذلك بمثال: نفترض لدينا قائمة بالطلاب الجامعيين ولعرض معلومات الطالب نحتاج لمعرفة رقمه الجامعي وللوصول له نستخدم params كما موضح أدناه :


محتوى ملف `app.js`:


     let students =[{id:1,name:'Ahmed',age:22,gpa:4.03}, {id:2,name:'Salem',age:21,gpa:3.83}, {id:3,name:'Khaled',age:23,gpa:4.52}, {id:4,name:'Ali',age:22,gpa:2.98}, {id:5,name:'Nasser',age:21,gpa:3.74}] 
     app.get ('/students/:id', function(req,res){ 
     let studentId = req.params.id
     console.log(studentId)
     if(0<studentId<students.length){
     student=students[studentId-1]
     res.locals.student=student
    res.render( 'show', student)}
    else
    res.render( 'errorMessage')})
    
    
    
 ##  ملاحظة: 
 إذا كنت تريد إرسال قيمة فالرابط فيجيب عليك وضع نقطتان رأسيتان قبل اسم الخاصية كما في المثال أعلاه تم وضع نقطتان رأسيتان قبل id في الرابط  'students/:id/'  في حين الإرسال تستبدل id:  برقم الطالب الجامعي  'students/3/'  كما موضح أدناه.
    
     http://localhost:3000/students/3
    
    
    
## خاصية req.body

قبل الدخول في تفاصيل العملية، لنقم أولاً بتجزئتها وفهمها، فالجزء الأول req هو إختصار request أي الطلب.
والجزء الثاني body أي المحتوى. نستنتج من ذلك أن req.body تعني المحتوى لهذا لطلب.

هذه العملية تمكننا من الوصول الى محتوى الطلب وتحديد المتغير أو القيمة المرسلة مع الطلب وإستخدامها.
مثال، في حالة قام أحد المستخدمين بإرسال طلب للوصول الى مع لوماته الشخصية، ستقوم العملية بإرسال 
المعرف id لهذا المستخدم كجزء من محتواها. وعند وصول الطلب سيتم التحقق من المستخدم من ثم إرسال
البيانات الخاصة به لعرضها.


- مثال إستخدام req.body للوصول الى id المستخدم : 


       const app = require('express')()

       app.use(bodyParser.json()) 
       app.use(bodyParser.urlencoded({ extended: true })) 

       app.post('/userInfo', function (req, res) {
       let userID = req.body.id;// we accesed user's id by using req.body
         })
         
         
 ## خاصية req.headers

كائن يحتوي على رأس محدد مسبقًا / مخصص مقدم في الطلب الحالي.

#### طريقة الاستعمال

ال req.headers;
 
غالبًا ما نريد التحقق من رؤوس الطلب الحالي. يمكن القيام بذلك بسهولة في الأشرعة.



         
        
 ## مقدمة في مفهوم ()res.send:

يتم إرسال رد عن طريق استدعاء دالة ()res.send تتكون هذه الدالة من جزء واحد فقط وهو body يمثل الرد الذي سيتم ارساله وقد يكون الرد أيًا مما يلي: 


- Buffer.
-  String.
- Object.
-  Array.

##  عمليه res.json
 
 وهي عمليه متعلقه بإرسال رد من نوع json عن طريق استدعاء داله res.json ، وتقبل json انواع بيانات محدده وهي 

- string 
- number 
- boolean
- array
- objects
- null


## يتم تجميع رموز حالة استجابة HTTP في خمس فئات

| الرمز  | الحالة |
|:---:|:------:|
|  1XX  |أكواد الحالة: طلبات إعلامية |--- |
|  2XX   |أكواد الحالة: الطلبات الناجحة|
|  3XX   | رموز الحالة: عمليات إعادة التوجيه|
|  4XX   |رموز الحالة: أخطاء العميل|
|  5XX   |أكواد الحالة: أخطاء الخادم|

## رمز الحال  1XX طلبات اعلامية

 
| الرمز  | الحالة |
|:---:|:------:|
|  100   |متابعة: كل شيء على ما يرام حتى الآن ويجب على العميل متابعة الطلب أو تجاهله إذا كان قد انتهى بالفعل. |--- |
|  101   | تبديل البروتوكولات: البروتوكول الذي يقوم الخادم بالتبديل إليه حسب طلب العميل الذي أرسل الرسالة بما في ذلك عنوان طلب الترقية|
|  102   | قيد المعالجة: وافق الخادم على الطلب الكامل ، لكنه لا يزال قيد المعالجة.|
|  103   |تلميحات مبكرة: السماح لوكيل المستخدم ببدء تحميل الموارد مسبقًا أثناء تحضير الخادم للاستجابة.|


## رمز الحالة 2XX الطلبات الناجحة

| الرمز  | الحالة |
|:---:|:------:|
|  200   |حسنًا: طلب ناجح. |--- |
|  201   |تم الإنشاء: أقر الخادم بالمورد الذي تم إنشاؤه|
|  202   | رمقبول: تم استلام طلب العميل ولكن الخادم لا يزال يقوم بمعالجته.|
|  203   |معلومات غير موثوقة: الاستجابة التي أرسلها الخادم إلى العميل ليست هي نفسها عندما أرسلها الخادم.|
|  204   |لا يوجد محتوى: قام الخادم بمعالجة الطلب ولكنه لا يقدم أي محتوى.|
|  205   |إعادة تعيين المحتوى: يجب على العميل تحديث نموذج المستند|
|  206   |المحتوى الجزئي: يرسل الخادم جزءًا فقط من المورد.|
|  207   |الحالة المتعددة: نص الرسالة التالي هو افتراضيًا رسالة XML ويمكن أن يحتوي على عدد من رموز الاستجابة المنفصلة.|

## رمز الحالة 3XX عمليات اعادة التوجية

| الرمز  | الحالة |
|:---:|:------:|
|  300   |اختيارات متعددة: الطلب الذي قدمه العميل له عدة استجابات محتملة. |--- |
|  301    | تم النقل بشكل دائم: يخبر الخادم العميل أن المورد الذي يبحثون عنه قد تم نقله بشكل دائم إلى عنوان URL آخر. سيتم إعادة توجيه جميع المستخدمين والروبوتات إلى عنوان URL الجديد. إنه رمز حالة مهم جدًا لتحسين محركات البحث.|
|  302   |  تم العثور عليها: تم نقل موقع ويب أو صفحة إلى عنوان URL مختلف مؤقتًا. إنه رمز حالة آخر يتعلق بـ SEO.|
|  303   | انظر أخرى: يخبر هذا الرمز العميل أن الخادم لا يعيد توجيههم إلى المورد المطلوب ولكن إلى صفحة أخرى.|
|  304   |غير معدّل: لم يتم تغيير المورد المطلوب منذ الإرسال السابق.|
|  305   |استخدام الوكيل: لا يمكن للعميل الوصول إلى المورد المطلوب إلا من خلال وكيل تم تقديمه في الاستجابة.|
|  307   |إعادة توجيه مؤقتة: يخبر الخادم العميل أن المورد الذي يبحث عنه قد تمت إعادة توجيهه مؤقتًا إلى عنوان URL آخر. إنها ذات صلة بأداء تحسين محركات البحث.|
|  308   |إعادة التوجيه الدائم: يخبر الخادم العميل أن المورد الذي يبحث عنه قد تمت إعادة توجيهه مؤقتًا إلى عنوان URL آخر. |

## رمز الحالة 4XX  أخطاء العميل 

| الرمز  | الحالة |
|:---:|:------:|
|  400   |طلب خاطئ: يرسل العميل طلبًا يحتوي على بيانات غير كاملة أو بيانات سيئة الإنشاء أو بيانات غير صالحة. |--- |
|  401   |غير مصرح به: التفويض مطلوب للعميل للوصول إلى المورد المطلوب.|
|  403   |ممنوع: المورد الذي يحاول العميل الوصول إليه محظور.|
|  404   |غير موجود: يمكن الوصول إلى الخادم ، ولكن الصفحة المحددة التي يبحث عنها العميل ليست كذلك.|
|  405   |الطريقة غير مسموح بها: استلم الخادم الطلب وتعرف عليه ، لكنه رفض طريقة الطلب المحددة.|
|  406   | غير مقبول: لا يدعم موقع الويب أو تطبيق الويب طلب العميل ببروتوكول معين.|
|  407   |مطلوب مصادقة الوكيل: رمز الحالة هذا مشابه لـ 401 غير مصرح به. الاختلاف الوحيد هو أن التفويض يجب أن يتم بواسطة وكيل.|
|  408   |مهلة الطلب: انتهت صلاحية الطلب الذي أرسله العميل إلى خادم موقع الويب.|
|  409   | التعارض: يتعارض الطلب الذي تم إرساله مع العمليات الداخلية للخادم.|
|  410   | ذهب: تم ​​مسح المورد الذي يريد العميل الوصول إليه نهائيًا.

## رمز الحالة 5XX أخطاء الخادم 

| الرمز  | الحالة |
|:---:|:------:|
|  500  |خطأ داخلي في الخادم: واجه الخادم موقفًا لا يمكنه التعامل معه أثناء معالجة طلب العميل. |--- |
|  501   | لم يتم التنفيذ: لا يعرف الخادم طريقة الطلب التي أرسلها العميل أو يمكنه حلها.|
|  502   | مدخل غير صالح: كان الخادم يعمل كبوابة أو خادم وكيل وتلقى رسالة غير صالحة من خادم وارد.|
|  503   |الخدمة غير متوفرة: قد يكون الخادم معطلاً ولا يمكن معالجة طلب العميل. يعد رمز حالة HTTP أحد أكثر مشكلات الخادم شيوعًا التي يمكنك مواجهتها على الويب.|
|  511   | مطلوب مصادقة الشبكة: يحتاج العميل إلى المصادقة على الشبكة قبل أن يتمكن من الوصول إلى المورد.|



## المرجع 
https://expressjs.com/en/4x/api.html#express
